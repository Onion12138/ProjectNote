- å•ä¾‹æ¨¡å¼



- è§‚å¯Ÿè€…æ¨¡å¼



- äº«å…ƒæ¨¡å¼



- ç­–ç•¥æ¨¡å¼



- æ¡¥æ¥æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šå¯¹ä¸åŒæ‰‹æœºç±»å‹ï¼ˆæŠ˜å å¼ã€ç›´ç«‹å¼ã€æ—‹è½¬å¼ï¼‰çš„ä¸åŒæ‰‹æœºå“ç‰Œå®ç°æ“ä½œç¼–ç¨‹ï¼ˆå¼€å…³æœºã€æ‰“ç”µè¯ç­‰ï¼‰

è®¾è®¡ç†å¿µï¼šåŸºäºç±»çš„æœ€å°è®¾è®¡åŸåˆ™ï¼Œå°†å®ç°ä¸æŠ½è±¡æ”¾åœ¨ä¸¤ä¸ªä¸åŒçš„ç±»å±‚æ¬¡ä¸­ï¼Œä½¿ä¸¤ä¸ªå±‚æ¬¡å¯ä»¥ç‹¬ç«‹æ”¹å˜ã€‚ç‰¹åˆ«é€‚ç”¨äºä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–è€…å› ä¸ºå¤šç»§æ‰¿è€Œå¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ çš„ç³»ç»Ÿã€‚

UMLç±»å›¾ï¼š

![image-20191204141156207](/Users/root1/Library/Application Support/typora-user-images/image-20191204141156207.png)

æ¨¡å¼è¿ç”¨ï¼š

JDBC

- è´£ä»»é“¾æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šå­¦æ ¡é‡‡è´­å®¡æ‰¹é¡¹ç›®ï¼Œé‡‡è´­å‘˜é‡‡è´­å™¨æï¼Œå¦‚æœé‡‘é¢å°äº5000å…ƒæ•™å­¦ä¸»ä»»å®¡æ‰¹ï¼Œå°äº10000å…ƒé™¢é•¿å®¡æ‰¹ï¼Œå°äº30000å…ƒæ ¡é•¿å®¡æ‰¹ã€‚

è®¾è®¡ç†å¿µï¼šä¸ºè¯·æ±‚åˆ›å»ºä¸€ä¸ªæ¥æ”¶è€…å¯¹è±¡çš„é“¾ã€‚æ¯ä¸ªæ¥æ”¶è€…éƒ½åŒ…å«å¯¹å¦ä¸€ä¸ªæ¥æ”¶è€…çš„å¼•ç”¨ï¼Œå¦‚æœè¯¥å¯¹è±¡ä¸èƒ½å¤„ç†è¯·æ±‚ï¼Œä¼šæŠŠè¯·æ±‚ä¼ ç»™ä¸‹ä¸€ä¸ªæ¥æ”¶è€…ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```java
public abstract class Approver {
    Approver approver;
    String name;
    public Approver(String name){
        this.name = name;
    }
    public void setApprover(Approver approver) {
        this.approver = approver;
    }
    public abstract void processRequest(Purchase purchase);
}
class DepartmentApprover extends Approver{
    public DepartmentApprover(String name) {
        super(name);
    }
    @Override
    public void processRequest(Purchase purchase) {
        if (purchase.getPrice() <= 5000){
            System.out.println(purchase.getId() + "è¢«" + this.name + "å¤„ç†");
        }else{
            approver.processRequest(purchase);
        }
    }
}
class Purchase{
    private float price = 0.0f;
    private int id = 0;
    public Purchase(float price, int id) {
        this.price = price;
        this.id = id;
    }
    public float getPrice() {
        return price;
    }
    public void setPrice(float price) {
        this.price = price;
    }
    public int getId() {
        return id;
    }
    public void setId(int id) {
        this.id = id;
    }
}
```

æ¨¡å¼è¿ç”¨ï¼š

SpringMVC

- å·¥å‚æ¨¡å¼

> ç®€å•å·¥å‚æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šæŠ«è¨ï¼Œç§ç±»å¾ˆå¤šæœ‰GreekPizzå’ŒCheesePizzï¼Œåˆ¶ä½œæœ‰prepareï¼Œbakeï¼Œcutï¼Œbox

è®¾è®¡ç†å¿µï¼šç”±å·¥å‚å°è£…å¯¹è±¡å®ä¾‹åŒ–çš„è¡Œä¸º

ä»£ç ç¤ºä¾‹ï¼š

```java
abstract public class Pizza {
    abstract void prepare();
    void bake(){}
    void cut(){}
    void box(){}
}
class GreekPizza extends Pizza{
    @Override
    void prepare() {}
}
class SimpleFactory{
    public Pizza createPizza(String type){
        Pizza pizza = null;
        if (type.equals("greek")){
            pizza = new GreekPizza();
        }
        return pizza;
    }
}
class OrderPizza{
    SimpleFactory factory;
    Pizza pizza;
    public void setFactory(SimpleFactory factory) {
        this.factory = factory;
        pizza = factory.createPizza("greek");
        pizza.prepare();
        pizza.bake();
        pizza.cut();
        pizza.box();
    }
    public Pizza getPizza() {
        return pizza;
    }
}
```

> å·¥å‚æ–¹æ³•æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šå®¢æˆ·å¯ä»¥ç‚¹ä¸åŒå£å‘³çš„æŠ«è¨ï¼Œå¦‚åŒ—äº¬å¥¶é…ªæŠ«è¨ã€åŒ—äº¬èƒ¡æ¤’æŠ«è¨ã€ä¼¦æ•¦å¥¶é…ªæŠ«è¨ç­‰

è®¾è®¡ç†å¿µï¼šå°†å®ä¾‹åŒ–åŠŸèƒ½æŠ½è±¡æˆæŠ½è±¡æ–¹æ³•ï¼Œå°†å¯¹è±¡å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»

UMLç±»å›¾ï¼š

![image-20191215105349676](/Users/root1/Library/Application Support/typora-user-images/image-20191215105349676.png)

ä»£ç ç¤ºä¾‹ï¼š

```java
abstract public class Pizza {
    abstract void prepare();
    void bake(){}
    void cut(){}
    void box(){}
}
class BJCheesePizza extends Pizza{
    @Override
    void prepare() {}
}
class BJPepperPizza extends Pizza{
    @Override
    void prepare() {}
}
abstract class OrderPizza{
    abstract Pizza createPizza(String type);
    Pizza pizza;
    public OrderPizza() {
        pizza = createPizza("cheese"); //æ ¹æ®ç”¨æˆ·è¾“å…¥
        pizza.prepare();
        pizza.bake();
        pizza.cut();
        pizza.box();
    }
}
class BJOrderPizza extends OrderPizza{
    @Override
    Pizza createPizza(String type) {
        Pizza pizza = null;
        if (type.equals("cheese")){
            pizza = new BJCheesePizza();
        }
        if (type.equals("pepper")){
            pizza = new BJPepperPizza();
        }
        return pizza;
    }
}

```

> æŠ½è±¡å·¥å‚æ¨¡å¼

UMLç±»å›¾

![image-20191215105702930](/Users/root1/Library/Application Support/typora-user-images/image-20191215105702930.png)

ä»£ç ç¤ºä¾‹ï¼š

```Java
abstract public class Pizza {
    abstract void prepare();
    void bake(){}
    void cut(){}
    void box(){}
}
class BJCheesePizza extends Pizza{
    @Override
    void prepare() {}
}
class BJPepperPizza extends Pizza{
    @Override
    void prepare() {}
}

interface AbsFactory{
    Pizza createPizza(String type);
}
class BJFactory implements AbsFactory{
    @Override
    public Pizza createPizza(String type) {
        Pizza pizza = null;
        if (type.equals("cheese")){
            pizza = new BJCheesePizza();
        }
        if (type.equals("pepper")){
            pizza = new BJPepperPizza();
        }
        return pizza;
    }
}
class OrderPizza{
    AbsFactory factory;
    public void setFactory(AbsFactory factory) {
        this.factory = factory;
        Pizza pizza = factory.createPizza("cheese");
        if (pizza != null){
            pizza.prepare();
            pizza.bake();
            pizza.cut();
            pizza.box();
        }
    }
}

```

- ä»£ç†æ¨¡å¼

è®¾è®¡ç†å¿µï¼šåœ¨å¯¹ç›®æ ‡å¯¹è±¡å®ç°çš„åŸºç¡€ä¸Šï¼Œå¢å¼ºé¢å¤–çš„åŠŸèƒ½æ“ä½œã€‚

> é™æ€ä»£ç†

ä»£ç ç¤ºä¾‹ï¼š

ï¼ˆè¦æ±‚ï¼šä»£ç†å¯¹è±¡å®ç°è¢«ä»£ç†å¯¹è±¡ç›¸åŒçš„æ¥å£ï¼‰

ï¼ˆä¼˜ç‚¹ï¼šåœ¨ä¸ä¿®æ”¹ç›®æ ‡å¯¹è±¡åŠŸèƒ½å‰æä¸‹ï¼Œå¯¹ç›®æ ‡åŠŸèƒ½æ‰©å±•ï¼‰

ï¼ˆç¼ºç‚¹ï¼šä¸€æ—¦æ¥å£å¢åŠ æ–¹æ³•ï¼Œç›®æ ‡å¯¹è±¡ä¸ä»£ç†å¯¹è±¡éƒ½è¦ç»´æŠ¤ï¼‰

```Java
public interface ITeacherDao {
    void teach();
}
class TeacherDao implements ITeacherDao{
    @Override
    public void teach() {
        System.out.println("è€å¸ˆæˆè¯¾");
    }
}
class TeacherDaoProxy implements ITeacherDao{
    private ITeacherDao target;
    public TeacherDaoProxy(ITeacherDao target) {
        this.target = target;
    }
    @Override
    public void teach() {
        System.out.println("ä»£ç†å¼€å§‹");
        target.teach();
        System.out.println("ä»£ç†ç»“æŸ");
    }
}
class Client{
    public static void main(String[] args) {
        TeacherDao teacherDao = new TeacherDao();
        TeacherDaoProxy proxy = new TeacherDaoProxy(teacherDao);
        proxy.teach();
    }
}
```

> åŠ¨æ€ä»£ç†

ä»£ç ç¤ºä¾‹ï¼š

```java
public interface ITeacherDao {
    void teach();
}
class TeacherDao implements ITeacherDao{
    @Override
    public void teach() {
        System.out.println("begin teaching");
    }
}
class ProxyFactory{
    private Object target;
    public ProxyFactory(Object target) {
        this.target = target;
    }
    public Object getProxyInstance() {
        //ClassLoader: æŒ‡å®šå½“å‰ç›®æ ‡å¯¹è±¡ç±»åŠ è½½å™¨
        //interfaces: ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£ç±»å‹
        //InvocationHandler: æ‰§è¡Œç›®æ ‡å¯¹è±¡çš„æ–¹æ³•æ—¶è§¦å‘
        return Proxy.newProxyInstance(target.getClass().getClassLoader()
                , target.getClass().getInterfaces()
                , new InvocationHandler() {
                    @Override
                    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
                        System.out.println("ä»£ç†å¼€å§‹");
                        return method.invoke(target, args);
                    }
                });
    }
}
class Client{
    public static void main(String[] args) {
        ITeacherDao target = new TeacherDao();
        ITeacherDao proxyInstance = (ITeacherDao) new ProxyFactory(target).getProxyInstance();
        proxyInstance.teach();
    }
}

```

> Cglibä»£ç†

ä»£ç ç¤ºä¾‹ï¼š

ï¼ˆè¦æ±‚ï¼šä»£ç†ç±»ä¸èƒ½ä¸ºfinalï¼Œç›®æ ‡å¯¹è±¡æ–¹æ³•ä¸ºfinalä¸èƒ½è¢«æ‹¦æˆªï¼‰

```java
import java.lang.reflect.Method;
import net.sf.cglib.proxy.Enhancer;
import net.sf.cglib.proxy.MethodInterceptor;
import net.sf.cglib.proxy.MethodProxy;
public class ProxyFactory implements MethodInterceptor {
	//ç»´æŠ¤ä¸€ä¸ªç›®æ ‡å¯¹è±¡
	private Object target;
	//æ„é€ å™¨ï¼Œä¼ å…¥ä¸€ä¸ªè¢«ä»£ç†çš„å¯¹è±¡
	public ProxyFactory(Object target) {
		this.target = target;
	}
	//è¿”å›ä¸€ä¸ªä»£ç†å¯¹è±¡:  æ˜¯ target å¯¹è±¡çš„ä»£ç†å¯¹è±¡
	public Object getProxyInstance() {
		//1. åˆ›å»ºä¸€ä¸ªå·¥å…·ç±»
		Enhancer enhancer = new Enhancer();
		//2. è®¾ç½®çˆ¶ç±»
		enhancer.setSuperclass(target.getClass());
		//3. è®¾ç½®å›è°ƒå‡½æ•°
		enhancer.setCallback(this);
		//4. åˆ›å»ºå­ç±»å¯¹è±¡ï¼Œå³ä»£ç†å¯¹è±¡
		return enhancer.create();
	}
	//é‡å†™  intercept æ–¹æ³•ï¼Œä¼šè°ƒç”¨ç›®æ ‡å¯¹è±¡çš„æ–¹æ³•
	@Override
	public Object intercept(Object arg0, Method method, Object[] args, MethodProxy arg3) throws Throwable {
		// TODO Auto-generated method stub
		System.out.println("Cglibä»£ç†æ¨¡å¼ ~~ å¼€å§‹");
		Object returnVal = method.invoke(target, args);
		System.out.println("Cglibä»£ç†æ¨¡å¼ ~~ æäº¤");
		return returnVal;
	}
}

public class Client {
	public static void main(String[] args) {
		// TODO Auto-generated method stub
		//åˆ›å»ºç›®æ ‡å¯¹è±¡
		TeacherDao target = new TeacherDao();
		//è·å–åˆ°ä»£ç†å¯¹è±¡ï¼Œå¹¶ä¸”å°†ç›®æ ‡å¯¹è±¡ä¼ é€’ç»™ä»£ç†å¯¹è±¡
		TeacherDao proxyInstance = (TeacherDao)new ProxyFactory(target).getProxyInstance();
		//æ‰§è¡Œä»£ç†å¯¹è±¡çš„æ–¹æ³•ï¼Œè§¦å‘intecept æ–¹æ³•ï¼Œä»è€Œå®ç° å¯¹ç›®æ ‡å¯¹è±¡çš„è°ƒç”¨
		String res = proxyInstance.teach();
		System.out.println("res=" + res);
	}
}

```

- è®¿é—®è€…æ¨¡å¼



- å¤–è§‚æ¨¡å¼



- è£…é¥°è€…æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šæ˜Ÿå·´å…‹å’–å•¡æœ‰å’–å•¡ç§ç±»ï¼ˆEspressoã€ShortBlackã€LongBlackã€Decafï¼‰ï¼Œè°ƒæ–™ä¸‰ç§ï¼ˆMilkã€Soyã€Chocolateï¼‰ï¼Œå®¢æˆ·å¯ä»¥å•ç‚¹å’–å•¡ï¼Œä¹Ÿå¯ä»¥å’–å•¡åŠ è°ƒæ–™ã€‚

è®¾è®¡ç†å¿µï¼šåŠ¨æ€åœ°å°†æ–°åŠŸèƒ½é™„åŠ åˆ°å¯¹è±¡ä¸Šï¼Œéµå¾ªå¼€é—­åŸåˆ™ã€‚

UMLç±»å›¾ï¼š

![image-20191204145134826](/Users/root1/Library/Application Support/typora-user-images/image-20191204145134826.png)

ä»£ç ç¤ºä¾‹ï¼š

```Java
public abstract class Drink {
    private String des;
    private float price = 0.0f;
    public abstract float cost();
    public float getPrice() {
        return price;
    }
    public void setDes(String des) {
        this.des = des;
    }
    public void setPrice(float price) {
        this.price = price;
    }
    public String getDes() {
        return des;
    }
}
class Coffee extends Drink{
    @Override
    public float cost() {
        return super.getPrice();
    }
}
class Espresso extends Coffee{
    public Espresso() {
        setDes("æ„å¼å’–å•¡");
        setPrice(3.2f);
    }
}
class Decorator extends Drink{
    private Drink obj;
    @Override
    public float cost() {
        return super.getPrice() + obj.cost();
    }
    public Decorator(Drink obj) {
        this.obj = obj;
    }
    @Override
    public String getDes() {
        return super.getDes() + " && " + obj.getDes();
    }
}
class Chocolate extends Decorator{
    public Chocolate(Drink obj) {
        super(obj);
        setDes("å·§å…‹åŠ›");
        setPrice(1.9f);
    }
}
class Milk extends Decorator{
    public Milk(Drink obj) {
        super(obj);
        setDes("ç‰›å¥¶");
        setPrice(2.5f);
    }
}
class Order{
    public static void main(String[] args) {
        Drink drink = new Espresso();
        System.out.println("cost: " + drink.cost());
        System.out.println("description: " + drink.getDes());
        drink = new Chocolate(drink);
        System.out.println("cost: " + drink.cost());
        System.out.println("description: " + drink.getDes());
        drink = new Milk(drink);
        System.out.println("cost: " + drink.cost());
        System.out.println("description: " + drink.getDes());
    }
}

```

æ¨¡å¼åº”ç”¨ï¼š

JDKä¸­IOæµ

InputStreamï¼šæŠ½è±¡ç±»ï¼Œç±»ä¼¼äºDrink

FileInputStreamï¼šå…·ä½“çš„è¢«è£…é¥°è€…

FilterInputStreamï¼šè£…é¥°è€…æŠ½è±¡ç±»

DataInputStream: FilterInputStreamå­ç±»ï¼Œå…·ä½“çš„è£…é¥°è€…

- åŸå‹æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šæœ‰ä¸€åªç¾ŠğŸ‘å§“åtomï¼Œç¼–å†™ç¨‹åºåˆ›å»ºå’Œtomç¾Šå±æ€§å®Œå…¨ç›¸åŒçš„10åªç¾Šã€‚

è®¾è®¡ç†å¿µï¼šç”¨åŸå‹å®ä¾‹åˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œé€šè¿‡æ‹·è´è¿™äº›åŸå‹ï¼Œåˆ›å»ºæ–°çš„å¯¹è±¡ã€‚

UMLç±»å›¾ï¼š

![image-20191202155701403](/Users/root1/Library/Application Support/typora-user-images/image-20191202155701403.png)

æ³¨æ„ï¼š

åŸå‹æ¨¡å¼åˆ›å»ºçš„å¯¹è±¡æ˜¯ä¸ä¸€æ ·çš„ã€‚

å±æ€§å¦‚æœæ˜¯å¼•ç”¨ç±»å‹çš„æˆå‘˜å˜é‡ï¼Œæµ…æ‹·è´ä¼šè¿›è¡Œå¼•ç”¨ä¼ é€’ï¼Œåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ä¿®æ”¹æˆå‘˜å˜é‡ä¼šå½±å“å¦ä¸€ä¸ªå¯¹è±¡æˆå‘˜å˜é‡å€¼ã€‚ç¤ºä¾‹ä»£ç ä¸­æä¾›äº†ä¸¤ç§å¤„ç†æ–¹å¼ã€‚

æ¨¡å¼åº”ç”¨ï¼š

Springä¸­beançš„åˆ›å»ºå°±æ˜¯è¿ç”¨äº†åŸå‹æ¨¡å¼ã€‚

ä»£ç ç¤ºä¾‹ï¼š

```Java
public class DeepPrototype implements Serializable, Cloneable{
    public Sheep sheep;
    @Override
    protected Object clone() {
        Object deep = null;
        try {
            deep = super.clone();
        } catch (CloneNotSupportedException e) {
            e.printStackTrace();
        }
        DeepPrototype deepPrototype = (DeepPrototype) deep;
        deepPrototype.sheep = (Sheep) sheep.clone();
        return deep;
    }
  //ä¸‹é¢ğŸ‘‡ä»£ç æ›´æ¨èï¼Œä½†å¯¹è±¡å¿…é¡»å®ç°Serializableæ¥å£
    public Object deepClone(){
        ByteArrayOutputStream bos = null;
        ObjectOutputStream oos = null;
        ByteArrayInputStream bis = null;
        ObjectInputStream ois = null;
        try {
            bos = new ByteArrayOutputStream();
            oos = new ObjectOutputStream(bos);
            oos.writeObject(this);
            bis = new ByteArrayInputStream(bos.toByteArray());
            ois = new ObjectInputStream(bis);
            return ois.readObject();
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }//çœç•¥å…³æµæ“ä½œ 
    }
}
public class Sheep implements Serializable, Cloneable{
    private String name;
    public Sheep(String name) {
        this.name = name;
    }
    public String getName() {
        return name;
    }
    public void setName(String name) {
        this.name = name;
    }
    @Override
    protected Object clone(){
        Sheep sheep = null;
        try {
            sheep = (Sheep) super.clone();
        } catch (CloneNotSupportedException e) {
            e.printStackTrace();
        }
        return sheep;
    }
}
class Client{
    public static void main(String[] args) {
        Sheep sheep = new Sheep("tom");
        Sheep sheep1 = (Sheep) sheep.clone();
        System.out.println(sheep1.hashCode());
        System.out.println(sheep.hashCode());
        DeepPrototype prototype = new DeepPrototype();
        prototype.sheep = new Sheep("Bob");
        DeepPrototype prototype1 = (DeepPrototype) prototype.clone();
        System.out.println(prototype.sheep.hashCode());
        System.out.println(prototype1.sheep.hashCode());
        DeepPrototype prototype2 = (DeepPrototype) prototype.deepClone();
        System.out.println(prototype2.sheep.hashCode());
    }
}
```

- å»ºé€ è€…æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šéœ€è¦å»ºæˆ¿å­ï¼Œè¿‡ç¨‹ä¸ºæ‰“æ¡©ï¼Œç Œå¢™ï¼Œå°é¡¶ã€‚æˆ¿å­æœ‰æ™®é€šæˆ¿ã€é«˜æ¥¼ã€åˆ«å¢…ç­‰ï¼Œç›–æˆ¿è¿‡ç¨‹è™½ç„¶ä¸€æ ·ï¼Œä½†è¦æ±‚ä¸å°½ç›¸åŒã€‚

è®¾è®¡ç†å¿µï¼šå°†å¤æ‚å¯¹è±¡çš„å»ºé€ è¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼Œä½¿è¿™ä¸ªæŠ½è±¡è¿‡ç¨‹çš„ä¸åŒå®ç°æ–¹æ³•æ„é€ å‡ºä¸åŒè¡¨ç°çš„å¯¹è±¡ã€‚

UMLç±»å›¾ï¼š

![image-20191202164637165](/Users/root1/Library/Application Support/typora-user-images/image-20191202164637165.png)

ä»£ç ç¤ºä¾‹ï¼š

```java
public class House {
    private String ground;
    private String wall;
    private String roof;
    public String getGround() {
        return ground;
    }
    public void setGround(String ground) {
        this.ground = ground;
    }
    public String getWall() {
        return wall;
    }
    public void setWall(String wall) {
        this.wall = wall;
    }
    public String getRoof() {
        return roof;
    }
    public void setRoof(String roof) {
        this.roof = roof;
    }
}

public abstract class HouseBuilder {
    protected House house = new House();
    public abstract void buildGround();
    public abstract void buildWall();
    public abstract void roofed();
    public House buildHouse(){
        return house;
    }
}

public class CommonHouse extends HouseBuilder {
    @Override
    public void buildGround() { }
    @Override
    public void buildWall() { }
    @Override
    public void roofed() { }
}

public class HouseDirector {
    HouseBuilder houseBuilder;
    public HouseDirector(HouseBuilder houseBuilder) {
        this.houseBuilder = houseBuilder;
    }
    public void setHouseBuilder(HouseBuilder houseBuilder) {
        this.houseBuilder = houseBuilder;
    }
    public House constructHouse(){
        houseBuilder.buildGround();
        houseBuilder.buildWall();
        houseBuilder.roofed();
        return houseBuilder.buildHouse();
    }
}

```

æ¨¡å¼åº”ç”¨ï¼š

Jdkä¸­çš„StringBuilderç±»

- é€‚é…å™¨æ¨¡å¼

> ç±»é€‚é…å™¨

ä»£ç ç¤ºä¾‹ï¼š

```Java
public class VoltageAdapter extends Voltage220 implements IVoltage5{
    @Override
    public int output5() {
        return output220()/44;
    }
}
class Voltage220{
    public int output220(){
        return 220;
    }
}
interface IVoltage5{
    int output5();
}
class Phone{
    void charge(IVoltage5 voltage5){
        if (voltage5.output5() == 5){
            System.out.println("charge");
        }
    }
    public static void main(String[] args) {
        Phone phone = new Phone();
        phone.charge(new VoltageAdapter());
    }
}
```

> æ¥å£é€‚é…å™¨

å½“ä¸éœ€è¦å…¨éƒ¨å®ç°æ¥å£æä¾›çš„æ–¹æ³•æ—¶ï¼Œå¯è®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»å®ç°æ¥å£ï¼Œä¸ºæ¥å£æ‰€æœ‰æ–¹æ³•æä¾›ç©ºæ–¹æ³•å®ç°ã€‚

> å¯¹è±¡é€‚é…å™¨

ä»£ç ç¤ºä¾‹ï¼š

```Java
public class VoltageAdapter implements IVoltage5{
    private Voltage220 voltage220;
    public VoltageAdapter(Voltage220 voltage220) {
        this.voltage220 = voltage220;
    }
    @Override
    public int output5() {
        return voltage220.output220()/44;
    }
}
class Voltage220{
    public int output220(){
        return 220;
    }
}
interface IVoltage5{
    int output5();
}
class Phone{
    void charge(IVoltage5 voltage5){
        if (voltage5.output5() == 5){
            System.out.println("charge");
        }
    }
    public static void main(String[] args) {
        Phone phone = new Phone();
        phone.charge(new VoltageAdapter(new Voltage220()));
    }
}
```

- ç»„åˆæ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šåœ¨ä¸€ä¸ªé¡µé¢ä¸­å±•ç¤ºå‡ºå­¦æ ¡çš„é™¢ç³»ç»„æˆã€‚ä¸€ä¸ªå­¦æ ¡æœ‰å¤šä¸ªå­¦é™¢ï¼Œä¸€ä¸ªå­¦é™¢æœ‰å¤šä¸ªç³»ã€‚

è®¾è®¡ç†å¿µï¼šåˆåéƒ¨åˆ†æ•´ä½“æ¨¡å¼ï¼Œåˆ›å»ºå¯¹è±¡ç»„çš„æ ‘å½¢ç»“æ„ï¼Œç”¨æ¥è¡¨ç¤ºæ•´ä½“-éƒ¨åˆ†çš„å±‚æ¬¡å…³ç³»ã€‚

UMLç±»å›¾ï¼š

![image-20191204131241687](/Users/root1/Library/Application Support/typora-user-images/image-20191204131241687.png)

ä»£ç ç¤ºä¾‹ï¼š

```java
public abstract class OrganizationComponent {
    protected void add(OrganizationComponent component){}
    protected void remove(OrganizationComponent component){}
    protected abstract void print();
}
class University extends OrganizationComponent{
    List<OrganizationComponent> organizationComponents = new ArrayList<>();
    @Override
    protected void add(OrganizationComponent component) {
        organizationComponents.add(component);
    }
    @Override
    protected void remove(OrganizationComponent component) {}
    @Override
    protected void print() { }
}
class College extends OrganizationComponent{
    List<OrganizationComponent> organizationComponents = new ArrayList<>();
    @Override
    protected void add(OrganizationComponent component) {
        organizationComponents.add(component);
    }
    @Override
    protected void remove(OrganizationComponent component) {
        organizationComponents.remove(component);
    }
    @Override
    protected void print() { }
}
class Department extends OrganizationComponent{
    @Override
    protected void print() { }
}

```

æ¨¡å¼åº”ç”¨ï¼š

JDKä¸­çš„HashMapç±»ã€Fileç±»

- å‘½ä»¤æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šæœ‰ä¸€å¥—æ™ºèƒ½å®¶ç”µï¼Œä½¿ç”¨ä¸€ä¸ªappæ§åˆ¶æ‰€æœ‰å®¶ç”µã€‚

è®¾è®¡ç†å¿µï¼šå°†åŠ¨ä½œçš„è¯·æ±‚è€…å’ŒåŠ¨ä½œçš„æ‰§è¡Œè€…è§£è€¦åˆã€‚

UMLç±»å›¾ï¼š

![image-20191204133933265](/Users/root1/Library/Application Support/typora-user-images/image-20191204133933265.png)

æ¨¡å¼åº”ç”¨ï¼š

JdbcTemplateåº”ç”¨

- æ¨¡ç‰ˆæ–¹æ³•æ¨¡å¼



- è¿­ä»£å™¨æ¨¡å¼



- ä¸­ä»‹è€…æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šæ™ºèƒ½å®¶å…·ç®¡ç†ã€‚ä¸»äººçœ‹ç”µè§†æ—¶ï¼Œå„ä¸ªè®¾å¤‡å¯ä»¥ååŒå·¥ä½œï¼Œè‡ªåŠ¨å®Œæˆçœ‹ç”µè§†çš„å‡†å¤‡å·¥ä½œï¼Œå¦‚é—¹é’Ÿå“èµ·ï¼Œå’–å•¡æœºåšå’–å•¡ï¼Œçª—å¸˜è½ä¸‹ï¼Œç”µè§†æœºå¼€å§‹æ’­æ”¾

è®¾è®¡ç†å¿µï¼šç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’

ä»£ç ç¤ºä¾‹ï¼š

```java
public abstract class Mediator {
    public abstract void register(String name, Colleague colleague);
    public abstract void getMessage(int stateChange, String colleague);
    public abstract void sendMessage();
}
class ConcreteMediator extends Mediator{
    private HashMap<String, Colleague> colleagueHashMap = new HashMap<>();
    private HashMap<String, String> interMap = new HashMap<>();
    @Override
    public void register(String name, Colleague colleague) {
        colleagueHashMap.put(name, colleague);
        if (colleague instanceof Alarm){
            interMap.put("Alarm", name);
        }
    }
    @Override
    public void getMessage(int stateChange, String colleague) {
        if (colleagueHashMap.get(colleague) instanceof Alarm){

        }
    }

    @Override
    public void sendMessage() {

    }
}
abstract class Colleague{
    private Mediator mediator;
    public String name;
    public Colleague(Mediator mediator, String name) {
        this.mediator = mediator;
        this.name = name;
    }
    public Mediator getMediator() {
        return mediator;
    }
    public abstract void sendMessage(int stateChange);
}
class Alarm extends Colleague{
    public Alarm(Mediator mediator, String name) {
        super(mediator, name);
        mediator.register(name, this);
    }
    @Override
    public void sendMessage(int stateChange) {
        this.getMediator().getMessage(stateChange, this.name);
    }
}

```



- å¤‡å¿˜å½•æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šçŠ¶æ€æ¢å¤

è®¾è®¡ç†å¿µï¼šä¸ç ´åå°è£…æ€§å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å¹¶åœ¨å¯¹è±¡ä¹‹å¤–ä¿å­˜çŠ¶æ€

ä»£ç ç¤ºä¾‹ï¼š

```Java
public class Originator {
    private String state;
    public String getState() {
        return state;
    }
    public void setState(String state) {
        this.state = state;
    }
    public Memo saveState(){
        return new Memo(state);
    }
    public void getStateFromMemo(Memo memo){
        state = memo.getState();
    }
}
class Memo {
    private String state;
    public String getState() {
        return state;
    }
    public Memo(String state) {
        this.state = state;
    }
}
class CareTaker{
    private List<Memo> memoList = new ArrayList<>();
    public void add(Memo memo){
        memoList.add(memo);
    }
    public Memo get(int index){
        return memoList.get(index);
    }
}
```



- è§£é‡Šå™¨æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šå®ç°å››åˆ™è¿ç®—

è®¾è®¡ç†å¿µï¼šå°†éœ€è¦è§£é‡Šæ‰§è¡Œçš„è¯­è¨€å¥å­è¡¨ç¤ºä¸ºä¸€ä¸ªæŠ½è±¡è¯­æ³•æ ‘

ä»£ç ç¤ºä¾‹ï¼š

```Java
public abstract class Expression {
    public abstract int interpreter(HashMap<String, Integer> map);
}
class VarExpression extends Expression{
    private String key;
    public VarExpression(String key) {
        this.key = key;
    }
    @Override
    public int interpreter(HashMap<String, Integer> map) {
        return map.get(this.key);
    }
}
class SymbolExpression extends Expression{
    protected Expression left;
    protected Expression right;
    public SymbolExpression(Expression left, Expression right) {
        this.left = left;
        this.right = right;
    }
    @Override
    public int interpreter(HashMap<String, Integer> map) {
        return 0;
    }
}
class AddExpression extends SymbolExpression{
    public AddExpression(Expression left, Expression right) {
        super(left, right);
    }
    @Override
    public int interpreter(HashMap<String, Integer> map) {
        return super.left.interpreter(map) + super.right.interpreter(map);
    }
}
class SubExpression extends SymbolExpression{
    public SubExpression(Expression left, Expression right) {
        super(left, right);
    }
    @Override
    public int interpreter(HashMap<String, Integer> map) {
        return super.left.interpreter(map) - super.right.interpreter(map);
    }
}
class Calculator{
    private Expression expression;
    public Calculator(String expStr){
        Stack<Expression> stack = new Stack<>();
        char[] charArray = expStr.toCharArray();
        Expression left = null;
        Expression right = null;
        for (int i = 0; i < charArray.length; i++) {
            switch (charArray[i]){
                case '+':
                    left = stack.pop();
                    right = new VarExpression(String.valueOf(charArray[++i]));
                    stack.push(new AddExpression(left, right));
                    break;
                case '-':
                    left = stack.pop();
                    right = new VarExpression(String.valueOf(charArray[++i]));
                    stack.push(new SubExpression(left, right));
                    break;
                default:
                    stack.push(new VarExpression(String.valueOf(charArray[i])));
                    break;
            }
        }
        this.expression = stack.pop();
    }
    public int run(HashMap<String, Integer> map){
        return this.expression.interpreter(map);
    }
}

```



æ¨¡å¼è¿ç”¨ï¼š

Springçš„SpelExp

- çŠ¶æ€æ¨¡å¼

é—®é¢˜å¼•å…¥ï¼šç¼–å†™ç¨‹åºå®ŒæˆAPPæŠ½å¥–æ´»åŠ¨ï¼Œæ´»åŠ¨æœ‰4ä¸ªçŠ¶æ€ï¼Œå¯ä»¥æŠ½å¥–ã€ä¸èƒ½æŠ½å¥–ã€å‘æ”¾å¥–å“å’Œå¥–å“é¢†å®Œã€‚

è®¾è®¡ç†å¿µï¼šä¸€ä¸ªå¯¹è±¡å†…åœ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œå…è®¸æ”¹å˜å…¶è¡Œä¸ºã€‚

UMLç±»å›¾ï¼š

![image-20191206231015542](/Users/root1/Library/Application Support/typora-user-images/image-20191206231015542.png)

ä»£ç ç¤ºä¾‹ï¼š(éå®Œæ•´ç‰ˆ)

```Java
public interface State {
    boolean raffle();
    void deduceMoney();
    void dispensePrize();
}
class NoRaffleState implements State{
    private Activity activity;
    public NoRaffleState(Activity activity) {
        this.activity = activity;
    }
    public boolean raffle() { return false;}
    public void deduceMoney() {
        activity.setState(new CanRaffleState());
    }
    public void dispensePrize() { }
}
class CanRaffleState implements State{
    public boolean raffle() {
        return true;
    }
    public void deduceMoney() { }
    public void dispensePrize() { }
}
class Activity{
    private State state;
    public State getState() {
        return state;
    }
    public void setState(State state) {
        this.state = state;
    }
}

```







